
<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta name="robots" content="nofollow" />


      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://embedded-systems-design.github.io/template_report/04-Block%20Diagram%2C%20Process%20Diagram%2C%20and%20Message%20Structure/">
      
      
        <link rel="prev" href="../03-IdeationAndConceptGeneration/">
      
      
        <link rel="next" href="../05-Poster/">
      
      
      <link rel="icon" href="../static/logo.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.4.0">
            

        

    
      
        <title>Team Block Diagram, Process Diagram, and Message Structure - EGR314 - Team 201 Report</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.9f615399.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.649f08f9.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Albert+Sans+SemiBold:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Albert Sans SemiBold";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    


   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#team-block-diagram" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="EGR314 - Team 201 Report" class="md-header__button md-logo" aria-label="EGR314 - Team 201 Report" data-md-component="logo">
      
  <img src="../static/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EGR314 - Team 201 Report
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Team Block Diagram, Process Diagram, and Message Structure
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/embedded-systems-design/template_report" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Homepage

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../02-TeamOrganization/" class="md-tabs__link">
        
  
    
  
  Team Organization

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../03-IdeationAndConceptGeneration/" class="md-tabs__link">
        
  
    
  
  Ideation and Concept Generation

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  Block Diagram, Process Diagram, and Message Structure

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../05-Poster/" class="md-tabs__link">
        
  
    
  
  Innovation Showcase Poster

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../06-Reflection/" class="md-tabs__link">
        
  
    
  
  Reflection

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../07-Resources/" class="md-tabs__link">
        
  
    
  
  Resources

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="EGR314 - Team 201 Report" class="md-nav__button md-logo" aria-label="EGR314 - Team 201 Report" data-md-component="logo">
      
  <img src="../static/logo.svg" alt="logo">

    </a>
    EGR314 - Team 201 Report
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/embedded-systems-design/template_report" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Homepage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../02-TeamOrganization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Team Organization
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../03-IdeationAndConceptGeneration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ideation and Concept Generation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Block Diagram, Process Diagram, and Message Structure
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Block Diagram, Process Diagram, and Message Structure
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#team-block-diagram" class="md-nav__link">
    Team Block Diagram
  </a>
  
    <nav class="md-nav" aria-label="Team Block Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decision-making-process-meeting-requirments" class="md-nav__link">
    Decision Making Process &amp; Meeting Requirments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-sequence-diagram" class="md-nav__link">
    Team Sequence Diagram
  </a>
  
    <nav class="md-nav" aria-label="Team Sequence Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functionality-meeting-requirements" class="md-nav__link">
    Functionality &amp; Meeting Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-message-structure" class="md-nav__link">
    Team Message Structure
  </a>
  
    <nav class="md-nav" aria-label="Team Message Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message-verification-table" class="md-nav__link">
    Message Verification Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-making-meeting-requirements" class="md-nav__link">
    Decision Making &amp; Meeting Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changes-in-software-design" class="md-nav__link">
    Changes in Software Design
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../05-Poster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Innovation Showcase Poster
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../06-Reflection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reflection
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../07-Resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#team-block-diagram" class="md-nav__link">
    Team Block Diagram
  </a>
  
    <nav class="md-nav" aria-label="Team Block Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#decision-making-process-meeting-requirments" class="md-nav__link">
    Decision Making Process &amp; Meeting Requirments
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-sequence-diagram" class="md-nav__link">
    Team Sequence Diagram
  </a>
  
    <nav class="md-nav" aria-label="Team Sequence Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#functionality-meeting-requirements" class="md-nav__link">
    Functionality &amp; Meeting Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#team-message-structure" class="md-nav__link">
    Team Message Structure
  </a>
  
    <nav class="md-nav" aria-label="Team Message Structure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message-verification-table" class="md-nav__link">
    Message Verification Table
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#decision-making-meeting-requirements" class="md-nav__link">
    Decision Making &amp; Meeting Requirements
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changes-in-software-design" class="md-nav__link">
    Changes in Software Design
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/embedded-systems-design/template_report/edit/main/docs/04-Block Diagram, Process Diagram, and Message Structure.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


  <h1>Block Diagram, Process Diagram, and Message Structure</h1>

<p>The following diagrams outline the hardware and message structure for Team 201’s project. Team 201’s Block Diagram highlights the various components each team member is using within their individual subsystem as well as the general flow of communication. Following the block diagram is the team sequence diagram. Sequence diagrams are extremely useful in visualizing how messages interact between subsystems. The team discusses the many scenarios/use-cases within this diagram — further details on how each message is structured in their respective situation is the last section of this page. For a comprehensive evaluation of said structure, see Table 4: Message Verification. </p>
<h2 id="team-block-diagram"><strong>Team Block Diagram</strong></h2>
<p><a class="glightbox" href="../static/Images/Team_201_Block_Diagram.drawio.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Team 201 Block Diagram" src="../static/Images/Team_201_Block_Diagram.drawio.png" /></a></p>
<h3 id="decision-making-process-meeting-requirments"><strong>Decision Making Process &amp; Meeting Requirments</strong></h3>
<p>The Block diagram decided on by Team 201 reflected greatly the concepts necessitated by the class project requirements, such as shared team power and communication structure. As each team member designed their subsystem, changes were gradually implemented to better optimize the communication between boards and overall functionality of the system. At this point in the project, it was important to consider the order of the daisy chain layout. The block diagram was structured in a circular manner to show the first member connecting to the following members in a clockwise fashion. This was important to visually showcase the communication as well. Functionally, the block diagram strictly adhered to the project requirements, as communication was built around the predefined class protocol. All major components chosen <strong>(voltage regulators, microcontrollers, power supplies)</strong> satisfy project requirements — Both required microcontrollers are featured throughout the block diagram, while each member maintains a 3.3V switching regulator of their choice. Furthermore, each member is clearly responsible for the four required subsystems.</p>
<h2 id="team-sequence-diagram"><strong>Team Sequence Diagram</strong></h2>
<p><a class="glightbox" href="../static/Images/Team%20201%20-%20UML%20Sequence%20Diagram.drawio.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="UML Diagram" src="../static/Images/Team%20201%20-%20UML%20Sequence%20Diagram.drawio.png" /></a></p>
<p>Sequence Diagram SVG Download: <a href="../static/Images/Team%20201%20-%20UML%20Sequence%20Diagram.drawio.svg">link</a></p>
<h3 id="functionality-meeting-requirements"><strong>Functionality &amp; Meeting Requirements</strong></h3>
<p>The function of the communication sequence developed by Team 201 within the scope of the EGR 314 project structure greatly enhances user experience and satisfies user needs. The interactive Museum exhibit designed by the team utilizes a daisy-chain style message structure, described above in the communication sequence diagram. As depicted, the device satisfies the user’s need for an interactive, yet simple user interface <em>(the user can only send three possible messages, all of the same type: selected paths, i.e. message type 3).</em> The device also accounts for the need for a colorful, eye-catching device by functioning autonomously during idle periods between users.</p>
<p>As a product of this project’s origin in an Engineering 314 class, additional criteria were also considered when developing the message structure. Though the message structure depicted above displays a particular order in which team members pass messages along, each member is capable of passing messages that aren’t intended for them <em>(see messages 7 and 8 in the UML diagram above as an example of this feature).</em> This fact means that each team member’s board can connect to the others in any order, provided that all boards are connected linearly to the others in a daisy-chain configuration. Indeed, this feature was employed frequently during testing to enable system functionality in the absence of various team members, and to ensure that each team member’s board indeed passes messages not meant for them.</p>
<p>Another functionality pictured above is bidirectional MQTT communication over a wireless connection. A critical function in testing and demonstration was the ability to craft messages on an external device (i.e. a laptop computer) and send them from MQTT as a broadcast. This advantageous feature also allows communication testing and overall device function even in the absence of various team members; if for some reason the sensor is disabled, messages of type 2 (sensor data) can be sent over the MQTT server and device function continues as normal. The MQTT features are not limited to only sending messages; the server is also used as a <strong>“scope”</strong> into the messages sent by other team members. As pictured above, each message passed through MQTT is visually ‘published’, allowing the team to ensure proper message handling and verify communication. When combined with the aforementioned daisy-chain reconfigurability, this functionality becomes invaluable.</p>
<h2 id="team-message-structure"><strong>Team Message Structure</strong></h2>
<p>UART messages are sent from team member to team member in an 8-byte format. Each byte has a specifix role, outlined in Table 1 below. </p>
<p><em>Table 1: Message Byte Structure</em></p>
<table>
<thead>
<tr>
<th><strong>Byte Number</strong></th>
<th>0-1</th>
<th>2</th>
<th>3</th>
<th>4</th>
<th>5</th>
<th>6-7</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Byte Contents</strong></td>
<td>AZ</td>
<td>Sender ID</td>
<td>Receiver ID</td>
<td>Message Type</td>
<td>Message Data</td>
<td>YB</td>
</tr>
</tbody>
</table>
<p>The message prefix AZ and suffix YB function as a message start/stop indicator, allowing team members to efficiently filter out extraneous noise on UART lines as well as anticipate a prescribed message format. Sender and Reciever IDs (see table 2) are used to identify to which team member a message is intended, as well as provide a marker of who sent the message. This is advantageous given the daisy-chain layout of Team 201's project, as messages will be sent from member to member until they are terminated by their recipient or their sender, depending on message type (see Table 3 for Message Type IDs and their respective data).</p>
<p><em>Table 2: Team IDs</em></p>
<table>
<thead>
<tr>
<th>Team member (Role)</th>
<th>Team ID</th>
</tr>
</thead>
<tbody>
<tr>
<td>JC <br>(HMI)</td>
<td>H</td>
</tr>
<tr>
<td>Eric <br>(Sensor)</td>
<td>S</td>
</tr>
<tr>
<td>Marcus <br>(MQTT Server)</td>
<td>M</td>
</tr>
<tr>
<td>Bradley <br>(Actuator)</td>
<td>A</td>
</tr>
<tr>
<td>Broadcast <br>(sends to all members)</td>
<td>X</td>
</tr>
</tbody>
</table>
<p><em>Table 3: Message Types and Data Structure</em></p>
<table>
<thead>
<tr>
<th>Message Type (UINT8_t)</th>
<th>Message Data info (UINT8_t)</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Type 0: Initialization</strong> <br><strong>Message Type ID:</strong> 0x00</td>
<td><strong>Message Contents:</strong><br>0x00 <em>Enable all systems</em></td>
</tr>
<tr>
<td><strong>Type 1: Drive Mode</strong> <br><strong>Message Type ID:</strong> 0x01</td>
<td><strong>Message Contents:</strong><br>0x00 <em>Autonomous Function</em><br>0x01 <em>User-Controlled Function</em></td>
</tr>
<tr>
<td><strong>Type 2: Sensor Data</strong> <br><strong>Message Type ID:</strong> 0x02</td>
<td><strong>Message Contents:</strong><br>0x00 <em>Sensor detects Orange</em><br>0x01 <em>Sensor detects Blue</em><br>0x02 <em>Sensor detects Pink</em></td>
</tr>
<tr>
<td><strong>Type 3: Path Selection</strong> <br><strong>Message Type ID:</strong> 0x03</td>
<td><strong>Message Contents:</strong><br>0x00 <em>Orient motor Left</em><br>0x01 <em>Orient motor Right</em><br>0x02 <em>Orient motor Right</em></td>
</tr>
</tbody>
</table>
<h3 id="message-verification-table"><strong>Message Verification Table</strong></h3>
<p>The following table (see Table 4) can be used to visualize all message styles to be sent during device function, and how each team member handles various message types. The order in which team members are featured (from left to right) also mirrors the flow of data throughout the device, namely, messages sent from Eric to JC must first pass through Marcus' board, then Bradley's, before finally reaching JC. This functionality is a result of the project's daisy-chain layout.</p>
<p><em>Table 4: Message Verification Table</em></p>
<table>
<thead>
<tr>
<th>Message Type <br><em>(Message Type ID)</em></th>
<th>JC <br>Role: HMI<br>ID:H</th>
<th>Eric <br>Role: Color Sensor<br>ID:S</th>
<th>Marcus<br>Role: MQTT Server (Web Service)<br>ID:M</th>
<th>Bradley<br>Role: Motor actuation<br>ID:M</th>
</tr>
</thead>
<tbody>
<tr>
<td>Initialize Routine<br><em>(0x00)</em></td>
<td>S<br>(Initialize Systems)</td>
<td>R<br>(Status Light Toggles)</td>
<td>R<br>(Status Light Toggles)</td>
<td>R<br>(Status Light Toggles)<br>(mqtt topic: /EGR314/TEAM201/SUB)</td>
</tr>
<tr>
<td>Drive Mode Change<br><em>(0x01)</em></td>
<td>S<br>(Alter Drive Mode to Autonomous or User-Controlled)</td>
<td>-</td>
<td>R<br>(mqtt topic: /EGR314/TEAM201/SUB)<br>S<br>(mqtt topic: /EGR314/TEAM201/PUB)</td>
<td>R<br>(Alter motor positioning algorith based on Drive mode sent)</td>
</tr>
<tr>
<td>Sensor data<br><em>(0x02)</em></td>
<td>R<br>(Display Element from detected category)</td>
<td>S<br>(Detected color is _)</td>
<td>R<br>(mqtt topic: /EGR314/TEAM201/SUB)<br>S<br>(mqtt topic: /EGR314/TEAM201/PUB)</td>
<td>R<br>(Alter motor position based on detected color)</td>
</tr>
<tr>
<td>User path select<br><em>(0x03)</em></td>
<td>S<br>(Selected path is _)</td>
<td>-</td>
<td>R<br>(mqtt topic: /EGR314/TEAM201/SUB)<br>S<br>(mqtt topic: /EGR314/TEAM201/PUB)</td>
<td>R<br>(Alter motor position based on selected path)</td>
</tr>
</tbody>
</table>
<h3 id="decision-making-meeting-requirements"><strong>Decision Making &amp; Meeting Requirements</strong></h3>
<p>The team adopted the classroom’s predefined message structure to ensure reliable UART-based communication between all subsystems. This structure consisted of a fixed sequence: <strong>PREFIX (AZ), SENDER ID, RECEIVER ID, MESSAGE TYPE, DATA, SUFFIX (YB).</strong> This served as the common protocol among the four subsystems, through the daisy chain. While the overall structure was given, our team made a deliberate decision to use single-byte fields for both the message type and data. This minimized parsing complexity and reduced the message length, which was especially important for speed and ease of implementation. Team 201 established four distinct message types:</p>
<ul>
<li>0x00: Status (Initialized)</li>
<li>0x01: Drive Mode (Automatic/Manual)</li>
<li>0x02: Sensor Color (Orange, Blue, Green)</li>
<li>0x03: Path Selection (Left, Center, Right)</li>
</ul>
<p>Each message type was paired with a set of acceptable data values, which ensured that every subsystem could validate and process only the message relevant to it. By standardizing both the structure and the content of it, the team avoided miscommunication and kept communication between microcontrollers relatively smooth.</p>
<h2 id="changes-in-software-design"><strong>Changes in Software Design</strong></h2>
<p>The team made several changes to their software design, with the majority of changes focusing on the team’s communication structure. The following changes are deemed most significant:</p>
<p><strong>1) Number of Message Types:</strong> Team 201 originally designed a message structure composed of several various data types, including additional error state messages and user accuracy information. As the project progressed Team 201 discovered that the majority of errors encountered dealt more with communication itself rather than on faulty data or board function, and as such converted the various error messages into one initialization routine that verified both message receipt and passing capabilities with a single broadcast message. This simple function was heavily utilized during the final phases of testing and demonstration, as it serves to indicate function, communication with other boards, and power. With each team member designing their software individually, it quickly became redundant to send messages related to user accuracy as each team member either did not utilize the information or was already calculating it on-board. As such the HMI, the only device used to display user accuracy, no longer sends that information to the remaining team boards.  </p>
<p><strong>2) Byte Structure:</strong> As discussed previously, message types and data are listed as a singular byte of information. <em>This was originally not the case</em> — Team 201 initially designed ‘message type’ to hold a space for two bytes, however this was a waste of space and speed during communication.   </p>
<p><strong>3) MQTT App vs Scope Functionality:</strong> Team 201 intended to create an entire user-facing application to function over MQTT after encouragement from external review. Over the course of the project, however, the scope of the team’s desired MQTT functionality shifted from a user-centered to product-development focus, leading to the current “scope” function of the MQTT board <em>(see “Communication Functionality and User/Project Needs” above).</em> While a user-facing application would have been an appropriate and entertaining option, lack of customizable applications and time constraints necessitated a shift in scope that better served the development of the final element sorter.  </p>
<p><strong>4) Case Structure:</strong> During software proposals, the PIC microcontroller's original program had the capability to parse an entire message and make a decision based on the content within said message. This software structure was extremely helpful for getting communication to function, but did not perform actions the way the team intended. While the structure of parsing was kept intact, a decision was made to move away from ‘if else’ statements and migrate to ‘switch case’ statements. This was useful to organize code, as well as quickly make a decision as the message was coming in, not after it was formatted together.  </p>
<p><strong>5) Interrupts vs delays:</strong> As the team progressed through the class, the focus was shifted to programming using interrupts, rather than delays. Team 201 moved to a more interrupt-driven approach due to the fact that it is more efficient on saving time to complete various tasks, as well as simultaneous completion of said tasks. This approach was implemented in both the PIC and ESP32 microcontrollers (enable interrupts in C, and asyncio in micropython).</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../03-IdeationAndConceptGeneration/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Ideation and Concept Generation" rel="prev">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Ideation and Concept Generation
              </div>
            </div>
          </a>
        
        
          
          <a href="../05-Poster/" class="md-footer__link md-footer__link--next" aria-label="Next: Innovation Showcase Poster" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Innovation Showcase Poster
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Team 201
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="/2025_fall" target="_blank" rel="noopener" title="2025 Site" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 464c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h160v80c0 17.7 14.3 32 32 32h80v288c0 8.8-7.2 16-16 16H64zM64 0C28.7 0 0 28.7 0 64v384c0 35.3 28.7 64 64 64h256c35.3 0 64-28.7 64-64V154.5c0-17-6.7-33.3-18.7-45.3l-90.6-90.5C262.7 6.7 246.5 0 229.5 0H64zm97 289c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0L79 303c-9.4 9.4-9.4 24.6 0 33.9l48 48c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-31-31 31-31zm96-34c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l31 31-31 31c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l48-48c9.4-9.4 9.4-24.6 0-33.9l-48-48z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tabs.sticky", "toc.follow", "navigation.top", "navigation.path", "navigation.indexes", "navigation.prune", "content.action.edit", "navigation.footer"], "search": "../assets/javascripts/workers/search.a264c092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.4e0fa4ba.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>